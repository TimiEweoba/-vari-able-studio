{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/Work/veri-able/-vari-able-studio/shared/schema.ts"],"sourcesContent":["import { sql } from \"drizzle-orm\";\r\nimport { pgTable, text, varchar } from \"drizzle-orm/pg-core\";\r\nimport { createInsertSchema } from \"drizzle-zod\";\r\nimport { z } from \"zod\";\r\n\r\nexport const users = pgTable(\"users\", {\r\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\r\n  username: text(\"username\").notNull().unique(),\r\n  password: text(\"password\").notNull(),\r\n});\r\n\r\nexport const contactRequests = pgTable(\"contact_requests\", {\r\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\r\n  name: text(\"name\").notNull(),\r\n  email: text(\"email\").notNull(),\r\n  company: text(\"company\"),\r\n  message: text(\"message\").notNull(),\r\n  createdAt: text(\"created_at\").default(sql`CURRENT_TIMESTAMP`),\r\n});\r\n\r\nexport const projects = pgTable(\"projects\", {\r\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\r\n  title: text(\"title\").notNull(),\r\n  description: text(\"description\").notNull(),\r\n  category: text(\"category\").notNull(),\r\n  imageUrl: text(\"image_url\").notNull(),\r\n  link: text(\"link\"),\r\n  featured: text(\"featured\").default(\"false\"), // \"true\" or \"false\"\r\n});\r\n\r\nexport const payments = pgTable(\"payments\", {\r\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\r\n  txRef: text(\"tx_ref\").notNull().unique(),\r\n  email: text(\"email\").notNull(),\r\n  amount: text(\"amount\").notNull(),\r\n  currency: text(\"currency\").notNull(),\r\n  status: text(\"status\").notNull().default(\"pending\"),\r\n  data: text(\"data\"), // store full payload if needed\r\n  createdAt: text(\"created_at\").default(sql`CURRENT_TIMESTAMP`),\r\n});\r\n\r\nexport const insertUserSchema = createInsertSchema(users).pick({\r\n  username: true,\r\n  password: true,\r\n});\r\n\r\nexport const insertContactSchema = createInsertSchema(contactRequests).omit({\r\n  id: true,\r\n  createdAt: true,\r\n}).extend({\r\n  name: z.string().min(2, \"Name must be at least 2 characters\"),\r\n  email: z.string().email(\"Please enter a valid email address\"),\r\n  message: z.string().min(10, \"Message must be at least 10 characters\"),\r\n});\r\n\r\nexport const insertProjectSchema = createInsertSchema(projects).omit({\r\n  id: true,\r\n});\r\n\r\nexport type InsertUser = z.infer<typeof insertUserSchema>;\r\nexport type User = typeof users.$inferSelect;\r\n\r\nexport type InsertContactRequest = z.infer<typeof insertContactSchema>;\r\nexport type ContactRequest = typeof contactRequests.$inferSelect;\r\n\r\nexport type InsertProject = z.infer<typeof insertProjectSchema>;\r\nexport type Project = typeof projects.$inferSelect;\r\n\r\nexport const insertPaymentSchema = createInsertSchema(payments).omit({\r\n  id: true,\r\n  createdAt: true,\r\n});\r\n\r\nexport type InsertPayment = z.infer<typeof insertPaymentSchema>;\r\nexport type Payment = typeof payments.$inferSelect;\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;AAAA;AAAA;AACA;AACA;;;;;AAEO,MAAM,QAAQ,IAAA,kKAAO,EAAC,SAAS;IACpC,IAAI,IAAA,+KAAO,EAAC,MAAM,UAAU,GAAG,OAAO,CAAC,qJAAG,CAAC,iBAAiB,CAAC;IAC7D,UAAU,IAAA,yKAAI,EAAC,YAAY,OAAO,GAAG,MAAM;IAC3C,UAAU,IAAA,yKAAI,EAAC,YAAY,OAAO;AACpC;AAEO,MAAM,kBAAkB,IAAA,kKAAO,EAAC,oBAAoB;IACzD,IAAI,IAAA,+KAAO,EAAC,MAAM,UAAU,GAAG,OAAO,CAAC,qJAAG,CAAC,iBAAiB,CAAC;IAC7D,MAAM,IAAA,yKAAI,EAAC,QAAQ,OAAO;IAC1B,OAAO,IAAA,yKAAI,EAAC,SAAS,OAAO;IAC5B,SAAS,IAAA,yKAAI,EAAC;IACd,SAAS,IAAA,yKAAI,EAAC,WAAW,OAAO;IAChC,WAAW,IAAA,yKAAI,EAAC,cAAc,OAAO,CAAC,qJAAG,CAAC,iBAAiB,CAAC;AAC9D;AAEO,MAAM,WAAW,IAAA,kKAAO,EAAC,YAAY;IAC1C,IAAI,IAAA,+KAAO,EAAC,MAAM,UAAU,GAAG,OAAO,CAAC,qJAAG,CAAC,iBAAiB,CAAC;IAC7D,OAAO,IAAA,yKAAI,EAAC,SAAS,OAAO;IAC5B,aAAa,IAAA,yKAAI,EAAC,eAAe,OAAO;IACxC,UAAU,IAAA,yKAAI,EAAC,YAAY,OAAO;IAClC,UAAU,IAAA,yKAAI,EAAC,aAAa,OAAO;IACnC,MAAM,IAAA,yKAAI,EAAC;IACX,UAAU,IAAA,yKAAI,EAAC,YAAY,OAAO,CAAC;AACrC;AAEO,MAAM,WAAW,IAAA,kKAAO,EAAC,YAAY;IAC1C,IAAI,IAAA,+KAAO,EAAC,MAAM,UAAU,GAAG,OAAO,CAAC,qJAAG,CAAC,iBAAiB,CAAC;IAC7D,OAAO,IAAA,yKAAI,EAAC,UAAU,OAAO,GAAG,MAAM;IACtC,OAAO,IAAA,yKAAI,EAAC,SAAS,OAAO;IAC5B,QAAQ,IAAA,yKAAI,EAAC,UAAU,OAAO;IAC9B,UAAU,IAAA,yKAAI,EAAC,YAAY,OAAO;IAClC,QAAQ,IAAA,yKAAI,EAAC,UAAU,OAAO,GAAG,OAAO,CAAC;IACzC,MAAM,IAAA,yKAAI,EAAC;IACX,WAAW,IAAA,yKAAI,EAAC,cAAc,OAAO,CAAC,qJAAG,CAAC,iBAAiB,CAAC;AAC9D;AAEO,MAAM,mBAAmB,IAAA,gKAAkB,EAAC,OAAO,IAAI,CAAC;IAC7D,UAAU;IACV,UAAU;AACZ;AAEO,MAAM,sBAAsB,IAAA,gKAAkB,EAAC,iBAAiB,IAAI,CAAC;IAC1E,IAAI;IACJ,WAAW;AACb,GAAG,MAAM,CAAC;IACR,MAAM,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACxB,OAAO,yKAAC,CAAC,MAAM,GAAG,KAAK,CAAC;IACxB,SAAS,yKAAC,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI;AAC9B;AAEO,MAAM,sBAAsB,IAAA,gKAAkB,EAAC,UAAU,IAAI,CAAC;IACnE,IAAI;AACN;AAWO,MAAM,sBAAsB,IAAA,gKAAkB,EAAC,UAAU,IAAI,CAAC;IACnE,IAAI;IACJ,WAAW;AACb"}},
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/Work/veri-able/-vari-able-studio/lib/db.ts"],"sourcesContent":["import { drizzle } from 'drizzle-orm/neon-http';\r\nimport { neon } from '@neondatabase/serverless';\r\nimport * as schema from '@shared/schema';\r\n\r\nif (!process.env.DATABASE_URL && !process.env.MONGO_URI) {\r\n    console.warn(\"DATABASE_URL is not set and MONGO_URI is missing. Database features will not work.\");\r\n}\r\n\r\n// Validate that the URL is actually for Postgres/Neon before attempting connection\r\nconst isPostgres = process.env.DATABASE_URL && (process.env.DATABASE_URL.startsWith(\"postgres\") || process.env.DATABASE_URL.startsWith(\"neondb\"));\r\n\r\nif (process.env.DATABASE_URL && !isPostgres) {\r\n    console.warn(\"DATABASE_URL is set but does not look like a Postgres URL (e.g. MongoDB). Falling back to in-memory storage.\");\r\n}\r\n\r\nexport const db = isPostgres\r\n    ? drizzle(neon(process.env.DATABASE_URL!), { schema })\r\n    : null as any;\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,IAAI,CAAC,QAAQ,GAAG,CAAC,YAAY,IAAI,CAAC,QAAQ,GAAG,CAAC,SAAS,EAAE;IACrD,QAAQ,IAAI,CAAC;AACjB;AAEA,mFAAmF;AACnF,MAAM,aAAa,QAAQ,GAAG,CAAC,YAAY,IAAI,CAAC,QAAQ,GAAG,CAAC,YAAY,CAAC,UAAU,CAAC,eAAe,QAAQ,GAAG,CAAC,YAAY,CAAC,UAAU,CAAC,SAAS;AAEhJ,IAAI,QAAQ,GAAG,CAAC,YAAY,IAAI,CAAC,YAAY;IACzC,QAAQ,IAAI,CAAC;AACjB;AAEO,MAAM,KAAK,aACZ,IAAA,qKAAO,EAAC,IAAA,gKAAI,EAAC,QAAQ,GAAG,CAAC,YAAY,GAAI;IAAE,QAAA;AAAO,KAClD"}},
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/Work/veri-able/-vari-able-studio/lib/mongo.ts"],"sourcesContent":["import mongoose from 'mongoose';\r\nimport { type User, type Project, type ContactRequest, type Payment } from '@shared/schema';\r\nimport crypto from 'crypto';\r\n\r\n// Ensure connection\r\nexport const connectToMongo = async () => {\r\n    if (mongoose.connection.readyState >= 1) return;\r\n    if (!process.env.MONGO_URI) throw new Error(\"MONGO_URI not set\");\r\n    await mongoose.connect(process.env.MONGO_URI, {\r\n        serverSelectionTimeoutMS: 5000, // Fail fast (5s)\r\n        family: 4, // Force IPv4 (Fixes many local DNS/ESERVFAIL issues)\r\n    });\r\n};\r\n\r\n// Schemas\r\nconst userSchema = new mongoose.Schema({\r\n    id: { type: String, default: () => crypto.randomUUID(), unique: true },\r\n    username: { type: String, required: true, unique: true },\r\n    password: { type: String, required: true },\r\n});\r\n\r\nconst projectSchema = new mongoose.Schema({\r\n    id: { type: String, default: () => crypto.randomUUID(), unique: true },\r\n    title: { type: String, required: true },\r\n    description: { type: String, required: true },\r\n    category: { type: String, required: true },\r\n    imageUrl: { type: String, required: true },\r\n    link: { type: String },\r\n    featured: { type: String, default: \"false\" },\r\n});\r\n\r\nconst contactRequestSchema = new mongoose.Schema({\r\n    id: { type: String, default: () => crypto.randomUUID(), unique: true },\r\n    name: { type: String, required: true },\r\n    email: { type: String, required: true },\r\n    company: { type: String },\r\n    message: { type: String, required: true },\r\n    createdAt: { type: Date, default: Date.now },\r\n});\r\n\r\nconst paymentSchema = new mongoose.Schema({\r\n    id: { type: String, default: () => crypto.randomUUID(), unique: true },\r\n    txRef: { type: String, required: true, unique: true },\r\n    email: { type: String, required: true },\r\n    amount: { type: String, required: true }, // Keeping as string to match schema\r\n    currency: { type: String, required: true },\r\n    status: { type: String, default: \"pending\" },\r\n    data: { type: String },\r\n    createdAt: { type: Date, default: Date.now },\r\n});\r\n\r\n// Models\r\n// We use `mongoose.models.X || mongoose.model('X', schema)` to prevent overwrite errors in serverless (hot reload)\r\nexport const UserModel = mongoose.models.User || mongoose.model('User', userSchema);\r\nexport const ProjectModel = mongoose.models.Project || mongoose.model('Project', projectSchema);\r\nexport const ContactRequestModel = mongoose.models.ContactRequest || mongoose.model('ContactRequest', contactRequestSchema);\r\nexport const PaymentModel = mongoose.models.Payment || mongoose.model('Payment', paymentSchema);\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAEA;;;AAGO,MAAM,iBAAiB;IAC1B,IAAI,mKAAQ,CAAC,UAAU,CAAC,UAAU,IAAI,GAAG;IACzC,IAAI,CAAC,QAAQ,GAAG,CAAC,SAAS,EAAE,MAAM,IAAI,MAAM;IAC5C,MAAM,mKAAQ,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,SAAS,EAAE;QAC1C,0BAA0B;QAC1B,QAAQ;IACZ;AACJ;AAEA,UAAU;AACV,MAAM,aAAa,IAAI,mKAAQ,CAAC,MAAM,CAAC;IACnC,IAAI;QAAE,MAAM;QAAQ,SAAS,IAAM,gHAAM,CAAC,UAAU;QAAI,QAAQ;IAAK;IACrE,UAAU;QAAE,MAAM;QAAQ,UAAU;QAAM,QAAQ;IAAK;IACvD,UAAU;QAAE,MAAM;QAAQ,UAAU;IAAK;AAC7C;AAEA,MAAM,gBAAgB,IAAI,mKAAQ,CAAC,MAAM,CAAC;IACtC,IAAI;QAAE,MAAM;QAAQ,SAAS,IAAM,gHAAM,CAAC,UAAU;QAAI,QAAQ;IAAK;IACrE,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,aAAa;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC5C,UAAU;QAAE,MAAM;QAAQ,UAAU;IAAK;IACzC,UAAU;QAAE,MAAM;QAAQ,UAAU;IAAK;IACzC,MAAM;QAAE,MAAM;IAAO;IACrB,UAAU;QAAE,MAAM;QAAQ,SAAS;IAAQ;AAC/C;AAEA,MAAM,uBAAuB,IAAI,mKAAQ,CAAC,MAAM,CAAC;IAC7C,IAAI;QAAE,MAAM;QAAQ,SAAS,IAAM,gHAAM,CAAC,UAAU;QAAI,QAAQ;IAAK;IACrE,MAAM;QAAE,MAAM;QAAQ,UAAU;IAAK;IACrC,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,SAAS;QAAE,MAAM;IAAO;IACxB,SAAS;QAAE,MAAM;QAAQ,UAAU;IAAK;IACxC,WAAW;QAAE,MAAM;QAAM,SAAS,KAAK,GAAG;IAAC;AAC/C;AAEA,MAAM,gBAAgB,IAAI,mKAAQ,CAAC,MAAM,CAAC;IACtC,IAAI;QAAE,MAAM;QAAQ,SAAS,IAAM,gHAAM,CAAC,UAAU;QAAI,QAAQ;IAAK;IACrE,OAAO;QAAE,MAAM;QAAQ,UAAU;QAAM,QAAQ;IAAK;IACpD,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,QAAQ;QAAE,MAAM;QAAQ,UAAU;IAAK;IACvC,UAAU;QAAE,MAAM;QAAQ,UAAU;IAAK;IACzC,QAAQ;QAAE,MAAM;QAAQ,SAAS;IAAU;IAC3C,MAAM;QAAE,MAAM;IAAO;IACrB,WAAW;QAAE,MAAM;QAAM,SAAS,KAAK,GAAG;IAAC;AAC/C;AAIO,MAAM,YAAY,mKAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,mKAAQ,CAAC,KAAK,CAAC,QAAQ;AACjE,MAAM,eAAe,mKAAQ,CAAC,MAAM,CAAC,OAAO,IAAI,mKAAQ,CAAC,KAAK,CAAC,WAAW;AAC1E,MAAM,sBAAsB,mKAAQ,CAAC,MAAM,CAAC,cAAc,IAAI,mKAAQ,CAAC,KAAK,CAAC,kBAAkB;AAC/F,MAAM,eAAe,mKAAQ,CAAC,MAAM,CAAC,OAAO,IAAI,mKAAQ,CAAC,KAAK,CAAC,WAAW"}},
    {"offset": {"line": 300, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/Work/veri-able/-vari-able-studio/lib/storage.ts"],"sourcesContent":["import { users, contactRequests, projects, payments, type User, type InsertUser, type ContactRequest, type InsertContactRequest, type Project, type InsertProject, type Payment, type InsertPayment } from \"@shared/schema\";\r\nimport { randomUUID } from \"crypto\";\r\nimport { db } from \"./db\";\r\nimport { eq } from \"drizzle-orm\";\r\nimport { connectToMongo, UserModel, ProjectModel, ContactRequestModel, PaymentModel } from \"./mongo\";\r\nimport * as mongoose from \"mongoose\";\r\n\r\nexport interface IStorage {\r\n    getUser(id: string): Promise<User | undefined>;\r\n    getUserByUsername(username: string): Promise<User | undefined>;\r\n    createUser(user: InsertUser): Promise<User>;\r\n    createContactRequest(request: InsertContactRequest): Promise<ContactRequest>;\r\n    getProjects(): Promise<Project[]>;\r\n    createProject(project: InsertProject): Promise<Project>;\r\n    createPayment(payment: InsertPayment): Promise<Payment>;\r\n    getPaymentByTxRef(txRef: string): Promise<Payment | undefined>;\r\n    updatePaymentStatus(txRef: string, status: string, data?: string): Promise<Payment>;\r\n}\r\n\r\nexport class MongoStorage implements IStorage {\r\n    constructor() {\r\n        connectToMongo().catch(err => console.error(\"MongoDB connection error:\", err));\r\n    }\r\n\r\n    private mapDoc<T>(doc: any): T {\r\n        const obj = doc.toObject();\r\n        // Convert _id to string if needed, but we used explicit 'id' field.\r\n        // Convert Dates to ISO strings to match Drizzle schema types\r\n        if (obj.createdAt instanceof Date) obj.createdAt = obj.createdAt.toISOString();\r\n        delete obj._id;\r\n        delete obj.__v;\r\n        return obj as T;\r\n    }\r\n\r\n    private async ensureConnection() {\r\n        if (mongoose.connection.readyState !== 1) {\r\n            try {\r\n                await connectToMongo();\r\n            } catch (err) {\r\n                console.error(\"MongoDB still disconnected. Operation may fail or timeout.\");\r\n                throw err;\r\n            }\r\n        }\r\n    }\r\n\r\n    async getUser(id: string): Promise<User | undefined> {\r\n        try {\r\n            await this.ensureConnection();\r\n            const user = await UserModel.findOne({ id });\r\n            return user ? this.mapDoc<User>(user) : undefined;\r\n        } catch (e) {\r\n            console.error(\"MongoStorage.getUser fallback error:\", e);\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    async getUserByUsername(username: string): Promise<User | undefined> {\r\n        try {\r\n            await this.ensureConnection();\r\n            const user = await UserModel.findOne({ username });\r\n            return user ? this.mapDoc<User>(user) : undefined;\r\n        } catch (e) {\r\n            console.error(\"MongoStorage.getUserByUsername fallback error:\", e);\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    async createUser(insertUser: InsertUser): Promise<User> {\r\n        await this.ensureConnection();\r\n        const user = await UserModel.create(insertUser);\r\n        return this.mapDoc<User>(user);\r\n    }\r\n\r\n    async createContactRequest(insertRequest: InsertContactRequest): Promise<ContactRequest> {\r\n        await this.ensureConnection();\r\n        const request = await ContactRequestModel.create(insertRequest);\r\n        return this.mapDoc<ContactRequest>(request);\r\n    }\r\n\r\n    async getProjects(): Promise<Project[]> {\r\n        try {\r\n            if (mongoose.connection.readyState !== 1) {\r\n                console.warn(\"[MongoStorage] MongoDB not connected, returning empty list or fallback projects would be better here.\");\r\n                // We'll try to connect but if it fails, we fall back to an empty list to prevent 10s timeout\r\n                await Promise.race([\r\n                    this.ensureConnection(),\r\n                    new Promise((_, reject) => setTimeout(() => reject(new Error(\"Timeout\")), 2000))\r\n                ]);\r\n            }\r\n\r\n            const allProjects = await ProjectModel.find().lean();\r\n            if (allProjects.length === 0) {\r\n                // ... (existing seeding logic)\r\n                const initialProjects: InsertProject[] = [\r\n                    {\r\n                        title: \"TenantFlow — Landlord CRM template\",\r\n                        description: \"A vertical starter product for small landlords. Listings, tenant onboarding, rent collection, and basic analytics.\",\r\n                        category: \"Featured\",\r\n                        imageUrl: \"https://images.unsplash.com/photo-1620712943543-bcc4688e7485?q=80&w=2565&auto=format&fit=crop\",\r\n                        link: \"#\",\r\n                        featured: \"true\",\r\n                    },\r\n                    {\r\n                        title: \"XPlus Commerce\",\r\n                        description: \"A high-performance e-commerce platform built for the Nigerian market. Features real-time inventory, secure payments via Flutterwave, and a modular architecture for rapid scaling.\",\r\n                        category: \"E-commerce\",\r\n                        imageUrl: \"https://images.unsplash.com/photo-1563013544-824ae1b704d3?q=80&w=2670&auto=format&fit=crop\",\r\n                        link: \"https://xplus.com.ng\",\r\n                        featured: \"true\",\r\n                    },\r\n                    {\r\n                        title: \"Stripe Billing\",\r\n                        description: \"Customer portal, subscriptions.\",\r\n                        category: \"Integration\",\r\n                        imageUrl: \"https://images.unsplash.com/photo-1551288049-bebda4e38f71?q=80&w=2670&auto=format&fit=crop\",\r\n                        link: \"#\",\r\n                        featured: \"false\",\r\n                    },\r\n                    {\r\n                        title: \"Admin Panel\",\r\n                        description: \"Role management, user controls.\",\r\n                        category: \"Infrastructure\",\r\n                        imageUrl: \"https://images.unsplash.com/photo-1518432031352-d6fc5c10da5a?q=80&w=2574&auto=format&fit=crop\",\r\n                        link: \"#\",\r\n                        featured: \"false\",\r\n                    }\r\n                ];\r\n\r\n                for (const p of initialProjects) {\r\n                    try { await ProjectModel.create(p); } catch (e) { }\r\n                }\r\n                const seeded = await ProjectModel.find().lean();\r\n                return seeded.map(p => this.mapDoc<Project>(p));\r\n            }\r\n            return allProjects.map((p: any) => this.mapDoc<Project>(p));\r\n        } catch (e) {\r\n            console.error(\"[MongoStorage] Critical failure, returning static fallback projects:\", e);\r\n            // Dynamic fallback to prevent empty page\r\n            return [\r\n                {\r\n                    id: \"fb-1\",\r\n                    title: \"System Online (Offline Mode)\",\r\n                    description: \"The database is currently unreachable. Some projects might be hidden.\",\r\n                    category: \"Service\",\r\n                    imageUrl: \"https://images.unsplash.com/photo-1563013544-824ae1b704d3?q=80&w=2670&auto=format&fit=crop\",\r\n                    link: \"#\",\r\n                    featured: \"true\",\r\n                }\r\n            ] as any;\r\n        }\r\n    }\r\n\r\n    async createProject(insertProject: InsertProject): Promise<Project> {\r\n        await this.ensureConnection();\r\n        const project = await ProjectModel.create(insertProject);\r\n        return this.mapDoc<Project>(project);\r\n    }\r\n\r\n    async createPayment(insertPayment: InsertPayment): Promise<Payment> {\r\n        try {\r\n            await this.ensureConnection();\r\n            const payment = await PaymentModel.create(insertPayment);\r\n            return this.mapDoc<Payment>(payment);\r\n        } catch (e) {\r\n            console.error(\"[MongoStorage] createPayment failed, falling back to transaction log:\", e);\r\n            // If Mongo fails, we return a virtual object so the payment can at least BEGIN.\r\n            // But we warn that it won't be saved.\r\n            return {\r\n                ...insertPayment,\r\n                id: randomUUID(),\r\n                status: \"pending\",\r\n                createdAt: new Date().toISOString(),\r\n                data: insertPayment.data || null\r\n            } as Payment;\r\n        }\r\n    }\r\n\r\n    async getPaymentByTxRef(txRef: string): Promise<Payment | undefined> {\r\n        try {\r\n            await this.ensureConnection();\r\n            const payment = await PaymentModel.findOne({ txRef });\r\n            return payment ? this.mapDoc<Payment>(payment) : undefined;\r\n        } catch (e) {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    async updatePaymentStatus(txRef: string, status: string, data?: string): Promise<Payment> {\r\n        try {\r\n            await this.ensureConnection();\r\n            const payment = await PaymentModel.findOneAndUpdate(\r\n                { txRef },\r\n                { status, data },\r\n                { new: true }\r\n            );\r\n            if (!payment) throw new Error(\"Payment not found\");\r\n            return this.mapDoc<Payment>(payment);\r\n        } catch (e) {\r\n            console.error(\"[MongoStorage] updatePaymentStatus failed:\", e);\r\n            throw e;\r\n        }\r\n    }\r\n}\r\n\r\nexport class DatabaseStorage implements IStorage {\r\n    async getUser(id: string): Promise<User | undefined> {\r\n        const [user] = await db.select().from(users).where(eq(users.id, id));\r\n        return user;\r\n    }\r\n\r\n    async getUserByUsername(username: string): Promise<User | undefined> {\r\n        const [user] = await db.select().from(users).where(eq(users.username, username));\r\n        return user;\r\n    }\r\n\r\n    async createUser(insertUser: InsertUser): Promise<User> {\r\n        const [user] = await db.insert(users).values(insertUser).returning();\r\n        return user;\r\n    }\r\n\r\n    async createContactRequest(insertRequest: InsertContactRequest): Promise<ContactRequest> {\r\n        const [request] = await db.insert(contactRequests).values(insertRequest).returning();\r\n        return request;\r\n    }\r\n\r\n    async getProjects(): Promise<Project[]> {\r\n        const allProjects = await db.select().from(projects);\r\n        if (allProjects.length === 0) {\r\n            const initialProjects: InsertProject[] = [\r\n                {\r\n                    title: \"TenantFlow — Landlord CRM template\",\r\n                    description: \"A vertical starter product for small landlords. Listings, tenant onboarding, rent collection, and basic analytics.\",\r\n                    category: \"Featured\",\r\n                    imageUrl: \"https://images.unsplash.com/photo-1620712943543-bcc4688e7485?q=80&w=2565&auto=format&fit=crop\",\r\n                    link: \"#\",\r\n                    featured: \"true\",\r\n                },\r\n                {\r\n                    title: \"XPlus Commerce\",\r\n                    description: \"A high-performance e-commerce platform built for the Nigerian market. Features real-time inventory, secure payments via Flutterwave, and a modular architecture for rapid scaling.\",\r\n                    category: \"E-commerce\",\r\n                    imageUrl: \"https://images.unsplash.com/photo-1563013544-824ae1b704d3?q=80&w=2670&auto=format&fit=crop\",\r\n                    link: \"https://xplus.com.ng\",\r\n                    featured: \"true\",\r\n                },\r\n                {\r\n                    title: \"Stripe Billing\",\r\n                    description: \"Customer portal, subscriptions.\",\r\n                    category: \"Integration\",\r\n                    imageUrl: \"https://images.unsplash.com/photo-1551288049-bebda4e38f71?q=80&w=2670&auto=format&fit=crop\",\r\n                    link: \"#\",\r\n                    featured: \"false\",\r\n                },\r\n                {\r\n                    title: \"Admin Panel\",\r\n                    description: \"Role management, user controls.\",\r\n                    category: \"Infrastructure\",\r\n                    imageUrl: \"https://images.unsplash.com/photo-1518432031352-d6fc5c10da5a?q=80&w=2574&auto=format&fit=crop\",\r\n                    link: \"#\",\r\n                    featured: \"false\",\r\n                }\r\n            ];\r\n\r\n            for (const p of initialProjects) {\r\n                try {\r\n                    await db.insert(projects).values(p);\r\n                } catch (e) {\r\n                    console.warn(\"Failed to seed project (might already exist):\", p.title);\r\n                }\r\n            }\r\n            return await db.select().from(projects);\r\n        }\r\n        return allProjects;\r\n    }\r\n\r\n    async createProject(insertProject: InsertProject): Promise<Project> {\r\n        const [project] = await db.insert(projects).values(insertProject).returning();\r\n        return project;\r\n    }\r\n\r\n    async createPayment(insertPayment: InsertPayment): Promise<Payment> {\r\n        const [payment] = await db.insert(payments).values(insertPayment).returning();\r\n        return payment;\r\n    }\r\n\r\n    async getPaymentByTxRef(txRef: string): Promise<Payment | undefined> {\r\n        const [payment] = await db.select().from(payments).where(eq(payments.txRef, txRef));\r\n        return payment;\r\n    }\r\n\r\n    async updatePaymentStatus(txRef: string, status: string, data?: string): Promise<Payment> {\r\n        const [payment] = await db.update(payments)\r\n            .set({ status, data })\r\n            .where(eq(payments.txRef, txRef))\r\n            .returning();\r\n        if (!payment) throw new Error(\"Payment not found\");\r\n        return payment;\r\n    }\r\n}\r\n\r\n// Fallback MemStorage\r\nexport class MemStorage implements IStorage {\r\n    private users: Map<string, User>;\r\n    private contactRequests: Map<string, ContactRequest>;\r\n    private projects: Map<string, Project>;\r\n    private payments: Map<string, Payment>;\r\n\r\n    constructor() {\r\n        this.users = new Map();\r\n        this.contactRequests = new Map();\r\n        this.projects = new Map();\r\n        this.payments = new Map();\r\n        this.seedProjects();\r\n    }\r\n\r\n    private seedProjects() {\r\n        const initialProjects: InsertProject[] = [\r\n            {\r\n                title: \"TenantFlow — Landlord CRM template\",\r\n                description: \"A vertical starter product for small landlords. Listings, tenant onboarding, rent collection, and basic analytics.\",\r\n                category: \"Featured\",\r\n                imageUrl: \"https://images.unsplash.com/photo-1620712943543-bcc4688e7485?q=80&w=2565&auto=format&fit=crop\",\r\n                link: \"#\",\r\n                featured: \"true\",\r\n            },\r\n            {\r\n                title: \"XPlus Commerce\",\r\n                description: \"A high-performance e-commerce platform built for the Nigerian market. Features real-time inventory, secure payments via Flutterwave, and a modular architecture for rapid scaling.\",\r\n                category: \"E-commerce\",\r\n                imageUrl: \"https://images.unsplash.com/photo-1563013544-824ae1b704d3?q=80&w=2670&auto=format&fit=crop\",\r\n                link: \"https://xplus.com.ng\",\r\n                featured: \"true\",\r\n            },\r\n            {\r\n                title: \"Stripe Billing\",\r\n                description: \"Customer portal, subscriptions.\",\r\n                category: \"Integration\",\r\n                imageUrl: \"https://images.unsplash.com/photo-1551288049-bebda4e38f71?q=80&w=2670&auto=format&fit=crop\",\r\n                link: \"#\",\r\n                featured: \"false\",\r\n            },\r\n            {\r\n                title: \"Admin Panel\",\r\n                description: \"Role management, user controls.\",\r\n                category: \"Infrastructure\",\r\n                imageUrl: \"https://images.unsplash.com/photo-1518432031352-d6fc5c10da5a?q=80&w=2574&auto=format&fit=crop\",\r\n                link: \"#\",\r\n                featured: \"false\",\r\n            }\r\n        ];\r\n\r\n        initialProjects.forEach(p => {\r\n            const id = randomUUID();\r\n            this.projects.set(id, { ...p, id, link: p.link ?? null, featured: p.featured ?? \"false\" });\r\n        });\r\n    }\r\n\r\n    async getUser(id: string): Promise<User | undefined> { return this.users.get(id); }\r\n    async getUserByUsername(username: string): Promise<User | undefined> {\r\n        return Array.from(this.users.values()).find(u => u.username === username);\r\n    }\r\n    async createUser(insertUser: InsertUser): Promise<User> {\r\n        const id = randomUUID();\r\n        const user = { ...insertUser, id };\r\n        this.users.set(id, user);\r\n        return user;\r\n    }\r\n    async createContactRequest(insertRequest: InsertContactRequest): Promise<ContactRequest> {\r\n        const id = randomUUID();\r\n        const req = { ...insertRequest, id, company: insertRequest.company ?? null, createdAt: new Date().toISOString() };\r\n        this.contactRequests.set(id, req);\r\n        return req;\r\n    }\r\n    async getProjects(): Promise<Project[]> { return Array.from(this.projects.values()); }\r\n    async createProject(insertProject: InsertProject): Promise<Project> {\r\n        const id = randomUUID();\r\n        const p = { ...insertProject, id, link: insertProject.link ?? null, featured: insertProject.featured ?? \"false\" };\r\n        this.projects.set(id, p);\r\n        return p;\r\n    }\r\n    async createPayment(insertPayment: InsertPayment): Promise<Payment> {\r\n        const id = randomUUID();\r\n        const p = { ...insertPayment, id, status: insertPayment.status ?? \"pending\", data: insertPayment.data ?? null, createdAt: new Date().toISOString() };\r\n        this.payments.set(id, p);\r\n        return p;\r\n    }\r\n    async getPaymentByTxRef(txRef: string): Promise<Payment | undefined> {\r\n        return Array.from(this.payments.values()).find(p => p.txRef === txRef);\r\n    }\r\n    async updatePaymentStatus(txRef: string, status: string, data?: string): Promise<Payment> {\r\n        const p = Array.from(this.payments.values()).find(x => x.txRef === txRef);\r\n        if (!p) throw new Error(\"Payment not found\");\r\n        p.status = status;\r\n        if (data) p.data = data;\r\n        return p;\r\n    }\r\n}\r\n\r\n// Initial storage setup\r\nexport let storage: IStorage = new MemStorage();\r\n\r\nasync function initializeStorage() {\r\n    const MONGO_URI = process.env.MONGO_URI;\r\n    const DATABASE_URL = process.env.DATABASE_URL;\r\n\r\n    if (MONGO_URI) {\r\n        try {\r\n            console.log(\"[Storage] Attempting to connect to MongoDB...\");\r\n            // Attempt to connect to Mongo with a timeout\r\n            await mongoose.connect(MONGO_URI, {\r\n                serverSelectionTimeoutMS: 5000, // Fail fast (5s) instead of hanging for 30s\r\n            });\r\n            console.log(\"[Storage] Using MongoDB Storage\");\r\n            storage = new MongoStorage();\r\n            return;\r\n        } catch (e: any) {\r\n            console.error(\"[Storage] MongoDB connection failed:\", e.message);\r\n        }\r\n    }\r\n\r\n    const isPostgres = !!DATABASE_URL && (DATABASE_URL.startsWith(\"postgres\") || DATABASE_URL.startsWith(\"neondb\"));\r\n\r\n    if (isPostgres) {\r\n        console.log(\"[Storage] Using Database Storage (Postgres)\");\r\n        storage = new DatabaseStorage();\r\n    } else {\r\n        console.warn(\"[Storage] Using In-Memory Storage (Data will be lost on restart)\");\r\n        storage = new MemStorage();\r\n    }\r\n}\r\n\r\n// Start initialization\r\ninitializeStorage().catch(err => {\r\n    console.error(\"[Storage] Critical initialization error:\", err);\r\n});\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 745, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/Work/veri-able/-vari-able-studio/app/api/payments/verify/%5BtxRef%5D/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { storage } from '@lib/storage';\r\n\r\nexport async function GET(req: Request, { params }: { params: { txRef: string } }) {\r\n    try {\r\n        const { txRef } = params;\r\n        const payment = await storage.getPaymentByTxRef(txRef);\r\n\r\n        if (!payment) {\r\n            return NextResponse.json({ message: \"Payment not found\" }, { status: 404 });\r\n        }\r\n\r\n        return NextResponse.json({ status: payment.status });\r\n    } catch (error: any) {\r\n        return NextResponse.json({ message: error.message || \"Failed to verify payment\" }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IAAI,GAAY,EAAE,EAAE,MAAM,EAAiC;IAC7E,IAAI;QACA,MAAM,EAAE,KAAK,EAAE,GAAG;QAClB,MAAM,UAAU,MAAM,2HAAO,CAAC,iBAAiB,CAAC;QAEhD,IAAI,CAAC,SAAS;YACV,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAAoB,GAAG;gBAAE,QAAQ;YAAI;QAC7E;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,QAAQ,QAAQ,MAAM;QAAC;IACtD,EAAE,OAAO,OAAY;QACjB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS,MAAM,OAAO,IAAI;QAA2B,GAAG;YAAE,QAAQ;QAAI;IACrG;AACJ"}}]
}